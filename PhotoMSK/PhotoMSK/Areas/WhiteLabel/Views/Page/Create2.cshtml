@model PhotoMSK.Models.EditViewModel.TextPageEditModel
@using PhotoMSK.Extensiolns
<div class="uk-container uk-container-center">
    <div class="uk-grid">
        <div class="uk-width-1-5">
            <a href="#">
                <img src="@Url.Content("/Content/images/logo-shape-black.svg")" />
            </a>
        </div>
        <div class="uk-width-4-5 uk-margin-small-top">
            <ul class="uk-breadcrumb">
                <li><a href="#" class="uk-text-muted"><i class="uk-icon-home"></i></a></li>
                <li><a href="#" class="uk-text-bold uk-link-muted uk-link-line">Все страницы</a></li>
            </ul>
        </div>
    </div>

    <div class="uk-grid">
        <div class="uk-width-1-1">
            <div class="uk-panel uk-panel-content-box">
                <div class="uk-panel-content-box-title">
                    <h2 class=" uk-margin-remove uk-text-bold">Создание страницы</h2>
                    <a href="#" class="uk-panel-content-box-breadcrumb uk-text-muted"><i class="uk-icon-long-arrow-left"></i> Вернуться</a>
                </div>
                <div class="uk-panel-content-box-body">
                    <div class="uk-grid uk-grid-divider">
                        <div class="uk-width-2-3">
                            <fieldset class="uk-form uk-form-horizontal uk-margin-large-bottom">
                                <span class="uk-form-counter">1</span>
                                <legend class="uk-form-title uk-text-bold">Основные данные</legend>
                                <div class="uk-form-row">
                                    <label class="uk-form-label" for="form-h-it">Название</label>
                                    <div class="uk-form-controls">
                                        <input id="title" type="text" id="form-h-it" data-role-input class="uk-form-large uk-form-large-text uk-width-1-1" placeholder="Название меню">
                                        <p class="uk-margin-small-top">
                                            Транслит: <a href="#modal-translite" class="uk-text-muted uk-link-reset uk-link-dotted" data-uk-modal>proverochnaya_stranica</a>
                                        </p>
                                    </div>
                                </div>

                                <div class="uk-form-row">
                                    <label class="uk-form-label" for="form-h-it">Категория</label>
                                    <div class="uk-form-controls">
                                        <div data-role-select-placeholder></div>
                                        <p class="uk-margin-small-top uk-text-muted uk-text-right uk-text-small">
                                            <i class="uk-icon-plus"></i>&nbsp;<a href="#modal-category" class="uk-link-dotted uk-text-muted" data-role-new-category data-uk-modal>Добавить новую категорию</a>
                                        </p>
                                    </div>
                                </div>
                            </fieldset>

                            <fieldset class="uk-form uk-form-horizontal uk-margin-large-bottom">
                                <span class="uk-form-counter">2</span>
                                <legend class="uk-form-title uk-text-bold">Текст статьи</legend>
                                
                                
                                <ul class="uk-nestable" data-uk-nestable="{group:'my-group'}">
                                    <li class="uk-nestable-list-item">
                                        <div class="uk-nestable-item">
                                            <div class="uk-nestable-handle"></div>
                                            <div data-nestable-action="toggle"></div>
                                            Item 1
                                        </div>
                                    </li>
                                    <li class="uk-nestable-list-item">
                                        <div class="uk-nestable-item">
                                            <div class="uk-nestable-handle"></div>
                                            <div data-nestable-action="toggle"></div>
                                            Item 2
                                        </div>
                                    </li>
                                    <li class="uk-nestable-list-item">
                                        <div class="uk-nestable-item">
                                            <div class="uk-nestable-handle"></div>
                                            <div data-nestable-action="toggle"></div>
                                            Item 4
                                        </div>
                                    </li>
                                </ul>
                               

                                <div class="uk-form-row">
                                    <textarea id="text" data-uk-htmleditor="{markdown:true}" data-role-input>@Model.Text</textarea>
                                </div>

                            </fieldset>
                            
                            <fieldset class="uk-form uk-form-horizontal uk-margin-large-bottom">
                                <span class="uk-form-counter">3</span>
                                <legend class="uk-form-title uk-text-bold">Доп. параметры</legend>

                                <div class="uk-form-row">
                                    <label class="ios7-switch" style="font-size: 18px;">
                                        <input id="publish" type="checkbox" data-role-input checked>
                                        <span></span>
                                        Опубликованный?
                                    </label>
                                </div>
                                <div class="uk-form-row">
                                    <label class="ios7-switch" style="font-size: 18px;">
                                        <input id="comments" type="checkbox" data-role-input checked>
                                        <span></span>
                                        Комментарии?
                                    </label>
                                </div>
                                <div class="uk-form-row">
                                    <input id="date" data-role-input type="text" class="uk-form-large uk-form-large-text uk-text-center" data-uk-datepicker="{format:'DD.MM.YYYY'}" value="@DateTime.Now.ToString("d")">
                                </div>
                            </fieldset>
                        </div>
                        <div class="uk-width-1-3">

                            <fieldset class="uk-form uk-form-horizontal uk-margin-large-bottom">
                                <span class="uk-form-counter">4</span>
                                <legend class="uk-form-title uk-text-bold">Виджеты</legend>
                                
                                <ul class="uk-nestable" data-uk-nestable="{group:'my-group'}">

                                    <li class="uk-nestable-list-item">
                                        <div class="uk-nestable-item">
                                            <div class="uk-nestable-handle"></div>
                                            <div data-nestable-action="toggle"></div>
                                            Item 3
                                        </div>
                                    </li>
                                </ul>
                            </fieldset>
                        </div>
                    </div>
                </div>

                <hr />

                <div class="uk-margin-bottom uk-margin-left uk-text-center">
                    <button class="uk-text-bold uk-button uk-button-reviews uk-button-save uk-width-1-3" data-role-save-button value="">Сохранить</button>
                    <a href="#" class="uk-text-muted uk-margin-left">отменить</a>
                </div>

            </div>
        </div>
    </div>
</div>


<div id="modal-category" class="uk-modal">
    <div class="uk-modal-dialog">
        <button type="button" class="uk-modal-close uk-close"></button>
        <div class="uk-modal-header">
            <h2>Новая категория</h2>
        </div>
        <section class="uk-form uk-form-horizontal">
            <div class="uk-form-row">
                <label class="uk-form-label" for="form-h-it">Название</label>
                <div class="uk-form-controls">
                    <input type="text" id="form-h-it" class="uk-form-large uk-form-large-text uk-width-1-1" placeholder="Название меню" data-role-category-name>
                    <p class="uk-margin-small-top">
                        Slug: <span class="uk-text-muted uk-link-dotted">proverochnaya_stranica</span>
                    </p>
                </div>
            </div>
        </section>
        <div class="uk-modal-footer uk-text-right">
            <button type="button" class="uk-button">Отменить</button>
            <button type="button" class="uk-button uk-button-success" data-role-save-category>Создать</button>
        </div>
    </div>
</div>

<div id="modal-translite" class="uk-modal">
    <div class="uk-modal-dialog">
        <button type="button" class="uk-modal-close uk-close"></button>
        <div class="uk-modal-header">
            <h2>Редактирование ссылки на транслите</h2>
        </div>
        <section class="uk-form uk-form-horizontal">
            <div class="uk-form-row">
                <label class="uk-form-label" for="form-h-it">Название</label>
                <div class="uk-form-controls">
                    <input type="text" id="form-h-it" class="uk-form-large uk-form-large-text uk-width-1-1" placeholder="Название_ссылки" data-role-shortcut>
                </div>
            </div>
        </section>
        <div class="uk-modal-footer uk-text-right">
            <button type="button" class="uk-button">Отменить</button>
            <button type="button" class="uk-button uk-button-success" data-role-save-shortcut>Изменить</button>
        </div>
    </div>
</div>


@section Scripts
{
    <script>
        $(function () {
            app.routeId = '@Model.RouteID';
            var pages = new window.TextPagesEditView();
            @if (Model.ID.HasValue)
            {
            <text>
            pages.model = new window.TextPageModel(@Model.ToJson());
            </text>
            }
            pages.render();
        })
    </script>
}
